# 技術選定と実装計画

## 日時
2025-12-03

## 技術スタック決定

### コア技術
- **TypeScript 5.3+**: 型安全性の確保
- **MediaPipe Tasks Vision**: FaceLandmarker API使用
- **Vite**: ビルドツール（高速、TypeScriptネイティブ対応）
- **Vitest**: テストフレームワーク

### プロジェクト構成
- **module/**: TypeScriptで実装されたコアモジュール
- **demo/**: Vanilla JSのシンプルな1ページデモ
- **dist/**: ビルド成果物（ESM + UMD + 型定義）

### 配布形式
1. ESM形式（モダンバンドラー向け）
2. UMD形式（CDN直接利用向け）
3. TypeScript型定義ファイル

## 実装ステップ

### Phase 1: 環境構築
1. package.json更新（依存関係追加）
2. TypeScript設定（tsconfig.json）
3. Vite設定（ライブラリモード）
4. ESLint/Prettier設定

### Phase 2: コアモジュール実装
1. 型定義作成（types/）
2. MediaPipe統合（core/FaceLandmarkerWrapper.ts）
3. 母音判定ロジック（core/VowelDetector.ts）
4. メインAPI（VowelTracker.ts）

### Phase 3: デモ作成
1. シンプルなHTML/CSS/JS
2. カメラアクセス
3. リアルタイム母音表示
4. 視覚的フィードバック

### Phase 4: ビルド・テスト
1. ビルド設定確認
2. ユニットテスト作成
3. デモでの動作確認

## API設計

```typescript
// 使用例
import { VowelTracker } from 'mouth-track';

const tracker = new VowelTracker({
  modelPath: './models/',
  onVowelDetected: (vowel) => {
    console.log(vowel); // 'closed' | 'a' | 'i' | 'u' | 'e' | 'o'
  }
});

await tracker.initialize();
tracker.start(videoElement);
```

## 判断理由

### Vite選定理由
- TypeScriptネイティブサポート
- 高速なHMR
- ライブラリモードでの簡単なバンドル
- 設定がシンプル

### MediaPipe Tasks Vision選定理由
- 最新API（従来のface_meshより高性能）
- TypeScript型定義充実
- WebAssemblyベースで高速
- ブラウザネイティブ動作

### デモをVanilla JSのみにした理由
- プロジェクト要件: "React,Vue,VanillaJSなどのモダンWEBアプリで簡単に実装できる"
- 最もシンプルな実装例を提供することで、他フレームワークへの応用が容易
- 依存関係を最小限に保つ

